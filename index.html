<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Task Manager - Demo App</title>
    <link rel="stylesheet" href="styles.css">
    <script>
  (function () {
    var webSdkScript = document.createElement("script");

    // fetch the latest 1.x.x version of the Web-SDK from the CDN
    webSdkScript.src =
      "https://unpkg.com/@grafana/faro-web-sdk@1/dist/bundle/faro-web-sdk.iife.js";

    webSdkScript.onload = () => {
      window.GrafanaFaroWebSdk.initializeFaro({
        url: "https://faro-collector-prod-us-east-0.grafana.net/collect/6b60dcfd79146261dddd19debcc615a0",
        app: {
          name: "task-manager",
          version: "1.0.0",
          environment: "production",
        },
        
      });


      // Load instrumentations at the onLoad event of the web-SDK and after the above configuration.
      // This is important because we need to ensure that the Web-SDK has been loaded and initialized before we add further instruments!
      var webTracingScript = document.createElement("script");

      // fetch the latest 1.x.x version of the Web Tracing package from the CDN
      webTracingScript.src =
        "https://unpkg.com/@grafana/faro-web-tracing@1/dist/bundle/faro-web-tracing.iife.js";

      // Initialize, configure (if necessary) and add the the new instrumentation to the already loaded and configured Web-SDK.
      webTracingScript.onload = () => {
        window.GrafanaFaroWebSdk.faro.instrumentations.add(
          new window.GrafanaFaroWebTracing.TracingInstrumentation()
        );
      };

      // Append the Web Tracing script script tag to the HTML page
      document.head.appendChild(webTracingScript);
    };

    // Append the Web-SDK script script tag to the HTML page
    document.head.appendChild(webSdkScript);
  })();
</script>

</head>
<body>
    <div class="container">
        <h1>‚ú® My Task Manager</h1>
        <p class="subtitle">This is a simple page we will instrument with Grafana Faro</p>
        
        <div class="input-group">
            <input 
                type="text" 
                id="taskInput" 
                placeholder="What needs to be done?"
                aria-label="New task input"
            >
            <button onclick="addTask()" aria-label="Add task">Add Task</button>
        </div>

        <ul class="task-list" id="taskList">
            <li class="empty-state">No tasks yet. Add one above to get started!</li>
        </ul>

        <div class="stats">
            <div class="stat">
                <div class="stat-number" id="totalTasks">0</div>
                <div>Total Tasks</div>
            </div>
            <div class="stat">
                <div class="stat-number" id="completedTasks">0</div>
                <div>Completed</div>
            </div>
        </div>

        <div class="error-trigger">
            <strong>üîç Testing Area</strong>
            <p style="margin: 10px 0; font-size: 14px; color: #666;">
                Click below to trigger an error for Faro to capture
            </p>
            <button onclick="triggerTestError()">Trigger Test Error</button>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>